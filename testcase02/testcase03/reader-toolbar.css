/* reader-toolbar.css - focuses only on toolbar and More panel */

/* Toolbar: scrollable strip + pinned actions */
#toolbar{
  position: sticky; top: 0; z-index: 1000;
  display: grid;
  grid-template-columns: 1fr max-content;
  align-items: center;
  gap: .5rem;
  padding: .4rem .5rem;
  background: var(--surface-bg);
  color: var(--surface-fg);
  border-block-end: 1px solid var(--border-weak);
  font-family: var(--ui-font-family);
}

/* Scrollable quick strip */
#quick{
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  min-height: 48px;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-gutter: stable both-edges;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x proximity;
  padding-inline-end: .5rem;
}

/* Fade hint for overflow - disabled on hover, focus, high-contrast */
#quick{
  --fade: linear-gradient(90deg,
            rgba(0,0,0,1) 0%,
            rgba(0,0,0,1) calc(100% - 2.25rem),
            rgba(0,0,0,0) 100%);
  -webkit-mask-image: var(--fade);
  mask-image: var(--fade);
}
#quick:focus-within,
#quick:hover,
body.theme-high-contrast #quick{
  -webkit-mask-image: none;
  mask-image: none;
}

/* Controls inside toolbar */
#quick select,
#quick input[type="range"],
#quick button,
#actions > *{
  font: inherit;
  padding: .3rem .45rem;
  border: 1px solid var(--field-border);
  border-radius: .375rem;
  background: var(--field-bg);
  color: var(--field-fg);
  min-height: 36px;
}
#size{ inline-size: clamp(110px, 16vw, 160px); }
#measure{ inline-size: clamp(110px, 20vw, 200px); }
.readout{ font-size: .9em; opacity: .85; min-width: 4ch; text-align: right; }

/* Pinned actions - never overflow */
#actions{
  display: inline-flex; align-items: center; gap: .5rem;
  min-width: max-content;
}

/* Details 'More' visuals */
details.tools{ position: relative; }
details.tools > summary{
  list-style: none; cursor: pointer; user-select: none;
  padding: .3rem .6rem; border: 1px solid var(--field-border);
  border-radius: .375rem; background: var(--field-bg); color: var(--field-fg);
}
details.tools > summary::-webkit-details-marker{ display: none; }
details.tools[open] > summary{ outline: var(--focus-outline); outline-offset: var(--focus-offset); }

/* Very narrow fallback - stack actions */
@media (max-width: 36rem){
  #toolbar{ grid-template-columns: 1fr; row-gap: .4rem; }
  #actions{ justify-content: flex-end; }
}

/* More panel */
.panel{
  position: fixed; left: 0; right: 0;
  top: var(--header-h, 56px);
  background: var(--surface-bg); color: var(--surface-fg);
  border-block: 1px solid var(--border-weak);
  padding: .75rem;
  max-height: min(60vh, 36rem);
  overflow: auto;
  box-shadow: 0 8px 20px rgba(0,0,0,.15);
}
.panel-grid{
  display: grid;
  grid-template-columns: repeat(4, minmax(12rem, 1fr));
  gap: 1rem;
}
@media (max-width: 64em){ .panel-grid{ grid-template-columns: repeat(2, minmax(12rem, 1fr)); } }
@media (max-width: 40em){ .panel-grid{ grid-template-columns: 1fr; } }
.grp{
  border: 1px solid color-mix(in srgb, currentColor 18%, transparent);
  border-radius: .5rem; padding: .75rem;
}
.grp h3{ font-size: 1rem; margin: 0 0 .5rem 0; }
.grp label{ display: block; font-size: .95em; margin: .25rem 0 .15rem; }
.grp .row{ display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; }
